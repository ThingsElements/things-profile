<!--
@license
Copyright Â© HatioLab Inc. All rights reserved.
-->
<link rel="import" href="./things-profile-tab-login.html">
<link rel="import" href="./things-profile-tab-user.html">
<link rel="import" href="./things-profile-tab-user-role.html">
<link rel="import" href="../things-detail/things-resource-detail-tab-view-behavior.html">

<dom-module id="things-profile-history">
    <template>
        <style>
        :host {
            display: block;
            @apply --layout-vertical;
            @apply --layout-flex;
        }
        things-layout-hades {
            @apply --layout-flex-2;
        }
        </style>
        <things-layout-hades sections="[[sections]]">
            <things-profile-tab-login tab-content-1></things-profile-tab-login>
            <things-profile-tab-user tab-content-2></things-profile-tab-user>
            <things-profile-tab-user-role tab-content-3></things-profile-tab-user-role>
        </things-layout-hades>
    </template>
    <script>
        Polymer({
            is: 'things-profile-history',
            behaviors: [
                Things.ResourceDetailTabViewBahavior
            ],
            properties: {
                sections: {
                    type: 'Array',
                    value: function() {
                        return [{
                            tabId: 'firstTab',
                            title: Things.DataGlobal.t('menu.SignInHistory'),
                            isTab: true
                        }, {
                            tabId: 'secondTab',
                            title: Things.DataGlobal.t('menu.UserHistory'),
                            isTab: true
                        }, {
                            tabId: 'thirdTab',
                            title: Things.DataGlobal.t('menu.UserRoleHistory'),
                            isTab: true
                        }];
                    }
                }
            },
            listeners: {
				'things-layout-tab-changed' : 'tabChangeProfile'
			},
			tabChangeProfile : function(e){
				var tabName = e.detail;
                if(tabName == 'firstTab' && this.$$('things-profile-tab-login') && this.$$('things-profile-tab-login').$$('things-resource-grid').grid && this.$$('things-profile-tab-login').$$('things-resource-grid').grid.resetGrid){
                    this.$$('things-profile-tab-login').$$('things-resource-grid').grid.resetGrid();
				}else if(tabName == 'secondTab' && this.$$('things-profile-tab-user') && this.$$('things-profile-tab-user').$$('things-resource-grid').grid && this.$$('things-profile-tab-user').$$('things-resource-grid').grid.resetGrid){
                    this.$$('things-profile-tab-user').$$('things-resource-grid').grid.resetGrid();
				}else if(tabName == 'thirdTab' && this.$$('things-profile-tab-user-role') && this.$$('things-profile-tab-user-role').$$('things-resource-grid').grid && this.$$('things-profile-tab-user-role').$$('things-resource-grid').grid.resetGrid){
                    this.$$('things-profile-tab-user-role').$$('things-resource-grid').grid.resetGrid();
				}
			}
        });
    </script>
</dom-module>
